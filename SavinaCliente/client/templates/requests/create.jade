.scroll-y
  .panel
    .panel-body.text-center(ng-if='submitting')
      h1
        i.fa.fa-fw.fa-circle-o-notch.fa-spin.margin-right-small

      h1 Enviando solicitud

      p Un momento por favor&hellip;

  .panel(ng-hide='submitting')
    .panel-heading
      .panel-title
        .panel-title-icon
          i.fa.margin-right-small.fa-plus

        .panel-title-text
          h3 Crear solicitud de {{ requestType.name }}
          p Envía una nueva solicitud a la mesa de trabajo

    .panel-body
      .btn-group.btn-group-justified.margin-bottom-base
        a.btn.btn-default(
          ng-class='{ "active": tab.curr === 0 }',
          ng-init='tab.count = tab.count + 1',
          ng-click='tab.set(0)')

          i.fa.margin-right-small.fa-user
          | Paciente

        a.btn.btn-default(
          ng-class='{ "active": tab.curr === 1 }',
          ng-init='tab.count = tab.count + 1',
          ng-disabled='form.patient.$invalid',
          ng-click='tab.set(1)')

          i.fa.margin-right-small.fa-file
          | Motivo

        a.btn.btn-default(
          ng-class='{ "active": tab.curr === 2 }',
          ng-init='tab.count = tab.count + 1',
          ng-disabled='form.patient.$invalid',
          ng-click='tab.set(2)')

          i.fa.margin-right-small.fa-book
          | Hipótesis diagnóstica

        a.btn.btn-default(
          ng-class='{ "active": tab.curr === 3 }',
          ng-init='tab.count = tab.count + 1',
          ng-disabled='form.patient.$invalid',
          ng-click='tab.set(3)')

          i.fa.margin-right-small.fa-stethoscope
          | Exámenes

      div(ng-show='tab.curr === 0')
        include-template(ng-src='/assets/templates/requests/create/patient.html')

      div(ng-show='tab.curr === 1')
        include-template(ng-src='/assets/templates/requests/create/motive.html')

      div(ng-show='tab.curr === 2')
        include-template(ng-src='/assets/templates/requests/create/hypothesis.html')

      div(ng-show='tab.curr === 3')
        include-template(ng-src='/assets/templates/requests/create/attachments.html')

      .btn-group-grid
        a.btn.btn-lg.btn-default(ng-href='/requests/consultations/worktable/ongoing')

          i.fa.margin-right-small.fa-times
          | Cancelar

        button.btn.btn-lg.btn-default(
          ng-disabled='tab.curr === 0',
          ng-click='tab.prev()',
          type='button')

          i.fa.margin-right-small.fa-chevron-left
          | Volver

        button.btn.btn-lg.btn-default(
          ng-disabled='tab.curr === 3 || form.patient.$invalid',
          ng-click='tab.next()',
          type='button')

          | Continuar
          i.fa.margin-left-small.fa-chevron-right

        button.btn.btn-lg.btn-default(
          ng-click='form.patient.$valid && form.hypothesis.$valid && form.motive.$valid && form.attachments.$valid && submit()',
          ng-disabled='form.patient.$invalid || form.hypothesis.$invalid || form.motive.$invalid || form.attachments.$invalid',
          type='button')

          | Crear Caso
          i.fa.margin-left-small.fa-plus
